---
layout: post
title: Cloudflare 免费指定 CDN 节点教程
ptype: post
mathjax: false
noindex: false
date: 2020-02-28 14:25:25
categories:
 -  笔记本
tags:
 - Cloudflare
 - CDN
 - DNS
 - Free
keywords: cloudflare, cdn, 免费, 第三方, CNAME, IP, 接入, NS, cloudflare partner, 节点, dns, dnspod, 教程, 方法, 介绍, 分享
description: 'Cloudflare 良心的同时，免费服务变得拥堵在所难免。这时我们只能「曲线救国」，通过第三方接入来避开被「玩坏」的节点。本文就介绍一下通过第三方平台接入免费指定 Cloudflare CDN 节点的方法，稍微配置便可显著提升访问速度！'
thumbnail: https://cdn.jsdelivr.net/gh/chralpha/imgbag/20200228224855.jpg
purl: cloudflare-switch-to-custom-cdn-node-for-free
---

Cloudflare 一直是业内良心商家的典范。强大的服务，充足的免费额度，提供免费的 CDN 更是让许多小站长免收恶意攻击。但是引来过多用户，原本富裕的服务变得拥堵，也是在所难免。这时我们只能「曲线救国」，通过第三方接入来避开被「玩坏」的免费节点。

<!--more-->

本文就介绍一下通过第三方平台接入免费指定 Cloudflare CDN 节点的方法，顺便分享一下国内三网合适的节点。

## 更改接入

Cloudflare 免费版是不支持 CNAME/IP 接入的，只能通过 NS 的形式接入。所以想要手动解析到特定的 CDN 节点接入，就不得不借助第三方服务 Cloudflare Partner 。

[Cloudflare Partner](https://www.cloudflare.com/partners/) 是一个 Cloudflare 的合作伙伴分销计划。由 Cloudflare 提供官方 API 接口，可以使用 WHMCS ， Cpanel 等面板集成 Cloudflare 的 CDN 加速服务。重点是大多数第三方平台没有接入限制，也就是说可以通过 IP 接入达到指定 CDN 节点的目的。

首先自然是选取一个 Partner 接入，我选择的是 [笨牛网](https://cdn.bnxb.com/) 。他们使用的是 GitHub 开源面板搭建的，不用担心数据隐私问题。

首先使用 Cloudflare 账号登陆奔牛网的面板，选择你要解析的域名，进入点击 **变更接入** - **CNAME 接入** 。

![](https://cdn.jsdelivr.net/gh/chralpha/imgbag/20200228213325.PNG)

**注意这一步会取消当前所有解析，请先备份！** 

然后添加你需要的二级解析。

![](https://cdn.jsdelivr.net/gh/chralpha/imgbag/20200228213143.PNG)

## 指定节点

这时候我们就可以将域名解析到指定 Cloudflare 节点上完成接入了。肯定不能再使用 Cloudflare 自己接自己，我们还需要另一个 DNS 服务商来完成，这里拿腾讯的 DNSPod 举例。

使用 邮箱 + 手机号 注册或者直接使用微信号登陆。DNSPod 域名可以不备案解析，目前我自己并没有遇到什么问题。

登陆进去后，进入「DNS管理 - 添加域名」，将你的域名添加进去。然后根据提示修改域名的 NS 服务器，把域名交给 DNSPod 解析。

注意这里解析的二级域名和前面添加的一直，然后模式选择 「A 接入」，内容是 Cloudflare CDN 的 IP。

你甚至可以给三网分配不同的节点，然后海外使用默认的节点，尽可能优化速度。然后境外使用默认分配节点，防止被官方*关照*。

![](https://cdn.jsdelivr.net/gh/chralpha/imgbag/20200228213144.PNG)

关于 Cloudflare 的推荐 IP 可以参考（摘自 [挖站否](https://wzfou.com/question/11632/)）：

```
108.162.236.1/24 联通 走美国
172.64.32.1/24 移动 走香港
104.16.160.1/24 电信 走美国洛杉矶

-----------------------------------------

172.64.0.0/24 电信 美国旧金山
104.20.157.0/24 联通 走日本
104.28.14.0/24 移动 走新加坡

 （联通移动推荐节点）
 104.23.240.0-104.23.243.254
 
 （电信推荐百度云合作ip）
 162.159.208.4-162.159.208.103
 162.159.209.4-162.159.209.103
 162.159.210.4-162.159.210.103
 162.159.211.4-162.159.211.103
 
-----------------------------------------

节点速度比较快的有：
104.20.157.2 
104.18.62.2 
141.101.115.3 
104.16.160.3

百度云加速与Cloudflare合作节点还有：
162.159.211.4-103
103.21.244.0/22
103.22.200.0/22
103.31.4.0/22
104.16.0.0/12
108.162.192.0/18
131.0.72.0/22
141.101.64.0/18
162.158.0.0/15
172.64.0.0/13
173.245.48.0/20
188.114.96.0/20
190.93.240.0/20
197.234.240.0/22
198.41.128.0/17

-----------------------------------------

其它的节点还有：

#适合电信的节点
104.23.240.*

#走欧洲各国出口 英国德国荷兰等 延迟比美国高一些 适合源站在欧洲的网站
172.64.32.*

#虽然去程走新加坡，但是回程线路的绕路的，实际效果不好，不推荐
104.16.160.*

#圣何塞的线路，比洛杉矶要快一点，推荐
108.162.236.*

#亚特兰大线路，延迟稳定，但是延迟较高

#适合移动的节点

162.158.133.* 
#走的丹麦，这一段ip只有部分能用，可以自己试一下。绕美国。

198.41.214.*
198.41.212.*
198.41.208.*
198.41.209.*
172.64.32.*
141.101.115.*
#移动走香港的IP段有很多，以上并不是全部。CF移动走香港的分直连和走ntt的效果都挺不错的，不过部分地区晚上还是会丢包。

172.64.0. *
#这是走圣何塞的，一般用香港的就行
172.64.16.* 
#欧洲线路.绕

-----------------------------------------

电信部分
大多数省直接使用1.0.0.0即可，延迟低，丢包少，

-----------------------------------------

#移动部分

#新加坡
 104.18.48.0-104.18.63.255
104.24.112.0-104.24.127.255
104.27.128.0-104.27.143.255
104.28.0.0-104.28.15.255

#圣何塞 
104.28.16.0-31.255
104.27.144.0-243.254
104.23.240.0-243.254

#香港cloudflare1-100g.hkix.net
1.0.0.0-254
1.1.1.0-254

 #香港直连
104.16.0.0-79.255
104.16.96.0-175.254
104.16.192.0-207.255
```

## 后

这番配置下来并不需要多少时间，但是得到的回报还是比较丰厚的。通过第三方平台接入，我们又可以免费薅上 Cloudflare 一把。

建议通过一些多点地网络工具测试一下上述 IP 在国内的连接效果，选择更合适的节点。

<br>

( Ended, thanks for reading! )